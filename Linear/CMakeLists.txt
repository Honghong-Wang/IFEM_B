PROJECT(LinEl)

CMAKE_MINIMUM_REQUIRED(VERSION 2.6)

# To allow standalone compilation out of the main tree
IF(NOT IFEM_CONFIGURED)
  FIND_PACKAGE(IFEM REQUIRED)
  SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} ${IFEM_CXX_FLAGS}")
ENDIF(NOT IFEM_CONFIGURED)

INCLUDE_DIRECTORIES(${IFEM_INCLUDES})

SET(EXECUTABLE_OUTPUT_PATH ${CMAKE_BINARY_DIR}/bin)

FILE(GLOB LinEl_SRCS *.C;../*.C)
FILE(GLOB El_SRCS ../*.C;../*.h)
FILE(GLOB LinEl_INST *.C;*.h;CMakeLists.txt)
FILE(GLOB LinEl_TSTS Test/*.xinp;Test/*.g2)
ADD_EXECUTABLE(LinEl ${LinEl_SRCS})
TARGET_LINK_LIBRARIES(LinEl IFEM ${IFEM_LIBRARIES})

# Installation
INSTALL(TARGETS LinEl DESTINATION bin COMPONENT bin)
INSTALL(FILES ${El_SRCS} DESTINATION share/doc/IFEM/Apps/Elasticity COMPONENT examples)
INSTALL(FILES ${LinEl_INST} DESTINATION share/doc/IFEM/Apps/Elasticity/Linear COMPONENT examples)
INSTALL(FILES ${LinEl_TSTS} DESTINATION share/doc/IFEM/Apps/Elasticity/Linear/Test COMPONENT examples)
